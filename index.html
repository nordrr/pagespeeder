<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>PageSpeed Tracker</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700;800&family=Roboto+Mono:wght@400;500;700;800&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <header class="page-header">
      <div>
        <h1>PageSpeed Tracker</h1>
        <p>Track PageSpeed Insights over time, average results, and compare URLs.</p>
      </div>
      <div class="header-actions">
        <button id="start-all" type="button">Start All</button>
        <button id="stop-all" type="button" class="secondary">Stop All</button>
      </div>
    </header>

    <main>
      <section class="panel controls-panel">
        <h2>Setup</h2>
        <form id="setup-form" autocomplete="off">
          <label>
            Google API Key
            <input id="api-key" name="apiKey" type="password" placeholder="AIza..." required />
          </label>
          <label>
            Poll Interval (seconds)
            <input id="poll-interval" name="interval" type="number" min="60" step="1" value="60" required />
          </label>
          <label>
            URL
            <input id="url-input" name="url" type="url" placeholder="https://example.com" required />
          </label>
          <button type="submit">Add URL</button>
        </form>
        <p class="hint">
          Runs both <strong>mobile</strong> and <strong>desktop</strong> tests each cycle.
          Confidence is shown as a 95% interval: <code>mean ± points</code>.
        </p>
      </section>

      <section class="panel">
        <div class="section-title-row">
          <h2>Tracked URLs</h2>
          <button id="clear-all" type="button" class="secondary danger">Clear All Data</button>
        </div>
        <div id="url-cards" class="url-cards"></div>
      </section>

      <section class="panel">
        <h2>Comparison Table</h2>
        <div class="table-wrap">
          <table id="comparison-table">
            <thead>
              <tr>
                <th data-sort-key="url" class="sortable">URL</th>
                <th data-sort-key="mode" class="sortable">Mode</th>
                <th data-sort-key="avgScore" class="sortable">Avg Score</th>
                <th data-sort-key="confidence" class="sortable">95% Confidence</th>
                <th data-sort-key="samples" class="sortable">Samples</th>
                <th data-sort-key="fcp" class="sortable">FCP</th>
                <th data-sort-key="si" class="sortable">SI</th>
                <th data-sort-key="lcp" class="sortable">LCP</th>
                <th data-sort-key="tbt" class="sortable">TBT</th>
                <th data-sort-key="cls" class="sortable">CLS</th>
              </tr>
            </thead>
            <tbody id="comparison-body">
              <tr>
                <td colspan="10" class="placeholder">No URLs yet. Add one above to begin tracking.</td>
              </tr>
            </tbody>
          </table>
        </div>
      </section>
    </main>

    <template id="url-card-template">
      <article class="url-card">
        <header>
          <div class="url-identity">
            <button class="url-card-title" type="button" data-hint="Add a label">
              <span class="url-label-line"></span>
              <span class="url-title-url"></span>
            </button>
            <input class="url-label-input" type="text" maxlength="80" placeholder="Add a label" />
            <p class="url-card-meta"></p>
          </div>
          <div class="url-card-actions">
            <button class="toggle-run" type="button"></button>
            <button class="run-now secondary" type="button">Run Now</button>
            <button class="remove danger" type="button">Remove</button>
          </div>
        </header>
        <div class="url-card-content">
          <section class="details-section">
            <div class="summary-strip">
              <article class="summary-tile mobile" data-mode="mobile">
                <p class="tile-label">Mobile Avg</p>
                <p class="tile-score">--</p>
                <p class="tile-meta">±-- • 0 runs</p>
              </article>
              <article class="summary-tile desktop" data-mode="desktop">
                <p class="tile-label">Desktop Avg</p>
                <p class="tile-score">--</p>
                <p class="tile-meta">±-- • 0 runs</p>
              </article>
            </div>
            <table class="metric-summary-table">
              <thead>
                <tr>
                  <th>Metric</th>
                  <th>Mobile</th>
                  <th>Desktop</th>
                </tr>
              </thead>
              <tbody class="metric-summary-body"></tbody>
            </table>
          </section>
          <section class="score-history-section">
            <h4>Score Runs</h4>
            <div class="score-history-scroll">
              <table class="score-history-table">
                <thead>
                  <tr>
                    <th>Run</th>
                    <th>Mobile</th>
                    <th>Desktop</th>
                  </tr>
                </thead>
                <tbody class="score-history-body"></tbody>
              </table>
            </div>
          </section>
        </div>
        <p class="error-text"></p>
      </article>
    </template>

    <script src="app.js"></script>
  </body>
</html>
